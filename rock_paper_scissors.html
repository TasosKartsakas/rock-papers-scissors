<!DOCTYPE html>
<html>
<head>
  <title>Rock,Paper,Scissors</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>

    let result;
    let computerScore = 0;
    let playerScore = 0;
    let playerSelection;

    function computerPlay(){
      result = Math.floor(Math.random() * 3)
      if (result === 1)
      return result = "paper"
      else if (result === 2)
      return result = "scissors"
      else
      return result = "rock"
    }


    function playRound(playerSelection, computerSelection) {
      playerSelection = prompt(`Score is: CPU: ${computerScore} | Your score: ${playerScore} Please choose one: Rock, Paper, Scissors`)
      playerSelection = playerSelection.toLowerCase()
      if (playerSelection == 'rock' && computerSelection == 'rock') {
      return console.log('Draw! Try again.')
      }
      else if (playerSelection == 'rock' && computerSelection == 'scissors') {
      console.log('You win! Rock always wins scissor')
      return playerScore += 1
      }
      else if (playerSelection == 'rock' && computerSelection == 'paper') {
      console.log('Computer wins this time. Sorry but paper covers rock.')
      return computerScore += 1
      }
      else if (playerSelection == 'scissors' && computerSelection == 'rock') {
      console.log('Computer wins this time. Sorry but rock breaks scissor!')  
      return computerScore += 1
      }
      else if (playerSelection == 'scissors' && computerSelection == 'paper') {
      console.log('You win! Scissors cuts paper!')  
      return  playerScore += 1
      }
      else if (playerSelection == 'scissors' && computerSelection == 'scissors') {
      return console.log('Draw! Try again.')
      }
      else if (playerSelection == 'paper' && computerSelection == 'rock') {
      console.log('You win! Paper covers rock.')
      return  playerScore += 1 
      }
      else if (playerSelection == 'paper' && computerSelection == 'scissors') {
      console.log('Computer wins this time.Sorry but scissors cuts paper.')  
      return computerScore += 1
      }
      else if (playerSelection == 'paper' && computerSelection == 'paper') {
      return console.log('Draw! Try again.')
      }
      else 
      return
    }


    function game() {
       playerScore = 0
       computerScore = 0
       playRound(playerSelection, computerPlay())
       if (playerScore === 3 || computerScore === 3) {
         let retry = confirm(`Nice game! Total score is: ${playerScore} for you and ${computerScore} for the CPU! Wanna play again?`)
         if (retry == true)
         game()
         else
         return
       }
       else
       playRound(playerSelection, computerPlay())


        
       if (playerScore === 3 || computerScore === 3) {
         let retry = confirm(`Nice game! Total score is: ${playerScore} for you and ${computerScore} for the CPU! Wanna play again?`)
         if (retry == true)
         game()
         else
         return
       }
       else
       playRound(playerSelection, computerPlay())

       if (playerScore === 3 || computerScore === 3) {
         let retry = confirm(`Nice game! Total score is: ${playerScore} for you and ${computerScore} for the CPU! Wanna play again?`)
         if (retry == true)
         game()
         else
         return
       }
       else
       playRound(playerSelection, computerPlay())


       if (playerScore === 3 || computerScore === 3) {
         let retry = confirm(`Nice game! Total score is: ${playerScore} for you and ${computerScore} for the CPU! Wanna play again?`)
         if (retry == true)
         game()
         else
         return
       }
       else
       playRound(playerSelection, computerPlay())

       if (playerScore > computerScore) 
       return alert('You won!')
       else if (playerScore < computerScore) 
       return alert('Sorry CPU won')
       else (playerScore === computerScore) 
         let retry = confirm(`Ohh! The result was draw? Wanna set things straight?`)
         if (retry == true)
         game()
         else
         return
       
    }


   





  </script>
</body>
</html>
